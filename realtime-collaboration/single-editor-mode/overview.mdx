<Warning>These Features are Currently in Beta and may be subject to change.</Warning>


<Tabs>
    <Tab title="React">
## Single Editor Mode

With Single Editor Mode, only one user will be able to edit the document at any given time. All other users live on the document will be automatically be read-only. 


## 1. Enable Single Editor Mode

Enables single editor mode.

```jsx
const liveStateSyncElement = client.getLiveStateSyncElement();
liveStateSyncElement.enableSingleEditorMode();
```

## 2. Disable Single Editor Mode

Disables single editor mode.


```jsx
const liveStateSyncElement = client.getLiveStateSyncElement();
liveStateSyncElement.disableSingleEditorMode();
```

## 3. Check if current user is the Editor

It's a subscription that returns:
- `true`: when the current user is set as `editor`
- `false`: when the current user is set as `reader`
-  `null`: when when the current user's access is not set.

```jsx
const liveStateSyncElement = client.getLiveStateSyncElement();
liveStateSyncElement.isUserEditor$().subscribe((isUserEditor) => {
		// your logic here...
});
```

## 4. Set current user as the Editor

Sets the current user as Editor. Note this will mark all the other users on the document as readonly users.

```jsx
const liveStateSyncElement = client.getLiveStateSyncElement();
liveStateSyncElement.setUserAsEditor();
```

## 5. Reset access for all users

Resets access for all users.

```jsx
const liveStateSyncElement = client.getLiveStateSyncElement();
liveStateSyncElement.resetUserAccess();
```


# 6. Auto Sync Text Elements

Auto Syncs the content of the following Text HTML elements, such that when `editor` types, the element's content is synced across all active users currently live on the document.
- input
- textarea
- ContentEditable Divs

To enable syncing, set the `data-velt-sync-state` attribute to `true` on the HTML element you want to sync:

<Info>You can an `id` attribute to make the syncing more stable</Info>

```jsx
<textarea id="uniqueId" data-velt-sync-state="true"></textarea>
```

<Warning>You must add the `data-velt-sync-state` attribute to a native HTML element (e.g. input, textarea). It will not work directly on React components.</Warning>



## 7. Auto Sync Access on HTML Elements

By default, we control enabling and disabling of these html elements on the page:
- input
- textarea
- select
- button
- contentEditable divs

If there are any other elements, that you want us to control, then you can add data-velt-sync-access="true" to that element.
Right now we are setting their attribute as "disabled" and are also preventing `click`, `mouseup` and `mousedown` events.

```jsx
<div data-velt-sync-access="true"></div>
```

<Warning>You must add the `data-velt-sync-access` attribute to native HTML elements (e.g. div, span). It will not work directly on React elements.</Warning>



    </Tab>
    <Tab title="Next.js">
## Single Editor Mode

With Single Editor Mode, only one user will be able to edit the document at any given time. All other users live on the document will be automatically be read-only. 


## 1. Enable Single Editor Mode

Enables single editor mode.

```jsx
const liveStateSyncElement = client.getLiveStateSyncElement();
liveStateSyncElement.enableSingleEditorMode();
```

## 2. Disable Single Editor Mode

Disables single editor mode.


```jsx
const liveStateSyncElement = client.getLiveStateSyncElement();
liveStateSyncElement.disableSingleEditorMode();
```

## 3. Check if current user is the Editor

It's a subscription that returns:
- `true`: when the current user is set as `editor`
- `false`: when the current user is set as `reader`
-  `null`: when when the current user's access is not set.

```jsx
const liveStateSyncElement = client.getLiveStateSyncElement();
liveStateSyncElement.isUserEditor$().subscribe((isUserEditor) => {
		// your logic here...
});
```

## 4. Set current user as the Editor

Sets the current user as Editor. Note this will mark all the other users on the document as readonly users.

```jsx
const liveStateSyncElement = client.getLiveStateSyncElement();
liveStateSyncElement.setUserAsEditor();
```

## 5. Reset access for all users

Resets access for all users.

```jsx
const liveStateSyncElement = client.getLiveStateSyncElement();
liveStateSyncElement.resetUserAccess();
```


# 6. Auto Sync Text Elements

Auto Syncs the content of the following Text HTML elements, such that when `editor` types, the element's content is synced across all active users currently live on the document.
- input
- textarea
- ContentEditable Divs

To enable syncing, set the `data-velt-sync-state` attribute to `true` on the HTML element you want to sync:

<Info>You can an `id` attribute to make the syncing more stable</Info>

```jsx
<textarea id="uniqueId" data-velt-sync-state="true"></textarea>
```

<Warning>You must add the `data-velt-sync-state` attribute to a native HTML element (e.g. input, textarea). It will not work directly on React components.</Warning>



## 7. Auto Sync Access on HTML Elements

By default, we control enabling and disabling of these html elements on the page:
- input
- textarea
- select
- button
- contentEditable divs

If there are any other elements, that you want us to control, then you can add data-velt-sync-access="true" to that element.
Right now we are setting their attribute as "disabled" and are also preventing `click`, `mouseup` and `mousedown` events.

```jsx
<div data-velt-sync-access="true"></div>
```

<Warning>You must add the `data-velt-sync-access` attribute to native HTML elements (e.g. div, span). It will not work directly on React elements.</Warning>

    </Tab>
    <Tab title="HTML">
## Single Editor Mode

With Single Editor Mode, you can make it so that only one user can be editing elements on the document at the same time.

## LiveStateSyncElement

The LiveStateSyncElement contains most of the methods listed below that can be used to configure Single Editor Mode.

To get an instance of the LiveStateSyncElement, use the `getLiveStateSyncElement()` method from the Velt client.

```jsx
const liveStateSyncElement = Velt.getLiveStateSyncElement();
```


## enableSingleEditorMode()

To enable single editor mode, use the `enableSingleEditorMode()` method.

```jsx
const liveStateSyncElement = Velt.getLiveStateSyncElement();
liveStateSyncElement.enableSingleEditorMode();
```

## disableSingleEditorMode()

To enable single editor mode, use the `disableSingleEditorMode()` method.


```jsx
const liveStateSyncElement = Velt.getLiveStateSyncElement();
liveStateSyncElement.disableSingleEditorMode();
```

## isUserEditor$()

To check if user is editor in single editor mode, subscribe to the `isUserEditor$()` event and pass in a callback function with your logic.

```jsx
const liveStateSyncElement = Velt.getLiveStateSyncElement();
liveStateSyncElement.isUserEditor$().subscribe((isUserEditor) => {
		// your logic here...
});
```

## setUserAsEditor()

To set the current user as editor in single editor mode, use the `setUserAsEditor()` method.

```jsx
const liveStateSyncElement = Velt.getLiveStateSyncElement();
liveStateSyncElement.setUserAsEditor();
```

## resetUserAccess()

To reset editor access in single editor mode, use the `resetUserAccess()` method.

```jsx
const liveStateSyncElement = Velt.getLiveStateSyncElement();
liveStateSyncElement.resetUserAccess();
```


# Text Element Sync

With Text Element Sync, you can sync Input-type elements so when one user types, it gets filled for other users viewing the element.

## Syncing Text elements

To allow Input, Textarea or Contentedible elements to sync across clients, set the `data-velt-sync-state` attribute to `true` on the element you are trying to sync:


```jsx
<textarea id="uniqueId" data-velt-sync-state="true"></textarea>
```

<Info>You can set an `id` to the HTML element to make the syncing more robust</Info>



## Making HTML elements readonly

When Single Editor Mode is ON, we control enabling and disabling of the following html elements on the page automatically: `input`, `textarea`, `select`, `button`.
To make us control any additional elements not part of the above list, you can set the `data-velt-sync-access` attribute to `true` on that element:

```jsx
<div data-velt-sync-access="true"></div>
```
    </Tab>

</Tabs>




<RequestExample>

```jsx React

//Get Velt Client
import { useVeltClient } from '@veltdev/react';
import { useEffect } from 'react';


function MyComponent(){
    const { client } = useVeltClient();

    useEffect( () => {
        //Get LiveStateSyncElement from Velt Client
        const liveStateSyncElement = client.getLiveStateSyncElement();


        //Enable Single Editor Mode
        liveStateSyncElement.enableSingleEditorMode();

        //Disable Single Editor Mode
        liveStateSyncElement.disableSingleEditorMode();


        //Check if Current User is Editor
        liveStateSyncElement.isUserEditor$().subscribe((isUserEditor) => {
                // your logic here...
        });

        //Set Current User as Editor
        liveStateSyncElement.setUserAsEditor();

        //Reset Editor Access
        liveStateSyncElement.resetUserAccess();
    },[])
    return (
        <div>
            {/* Enable Auto State Sync across on Elements */}
            <textarea id="uniqueId" data-velt-sync-state="true"></textarea>
            {/* Enable Auto Access Sync on Custom Element*/}
            <div data-velt-sync-access="true"></div>
        </div>
    )
}

```

```jsx Next.js

//Get Velt Client
import { useVeltClient } from '@veltdev/react';
import { useEffect } from 'react';


function MyComponent(){
    const { client } = useVeltClient();

    useEffect( () => {
        //Get LiveStateSyncElement from Velt Client
        const liveStateSyncElement = client.getLiveStateSyncElement();


        //Enable Single Editor Mode
        liveStateSyncElement.enableSingleEditorMode();

        //Disable Single Editor Mode
        liveStateSyncElement.disableSingleEditorMode();


        //Check if Current User is Editor
        liveStateSyncElement.isUserEditor$().subscribe((isUserEditor) => {
                // your logic here...
        });

        //Set Current User as Editor
        liveStateSyncElement.setUserAsEditor();

        //Reset Editor Access
        liveStateSyncElement.resetUserAccess();
    },[])
    return (
        <div>
            {/* Enable Auto State Sync across on Elements */}
            <textarea id="uniqueId" data-velt-sync-state="true"></textarea>
            {/* Enable Auto Access Sync on Custom Element*/}
            <div data-velt-sync-access="true"></div>
        </div>
    )
}
```

```jsx HTML
<script>
if(Velt){

//Get LiveStateSyncElement from Velt Client
const liveStateSyncElement = Velt.getLiveStateSyncElement();


//Enable Single Editor Mode
liveStateSyncElement.enableSingleEditorMode();

//Disable Single Editor Mode
liveStateSyncElement.disableSingleEditorMode();


//Check if Current User is Editor
liveStateSyncElement.isUserEditor$().subscribe((isUserEditor) => {
		// your logic here...
});

//Set Current User as Editor
liveStateSyncElement.setUserAsEditor();

//Reset Editor Access
liveStateSyncElement.resetUserAccess();
}
</script>
<body>
    <!-- sync element with other clients -->
    <textarea data-velt-sync-state="true"></textarea>

    <!-- disable clicks on element -->
    <div data-velt-sync-access="true"></div>
</body>
```

</RequestExample>

