---
title: "System Comments"
sidebarTitle: "Overview"
description: "TBD"
---

<Tabs>
  <Tab title="HTML">
### 1) Generate Auth Token

a. Open Velt Console

b. Under the Auth Token section, click on Generate Token button:

![](https://files.readme.io/78efa84-image.png)

c. Copy the generated token

![](https://files.readme.io/97c5e80-image.png)

d. Click on Save button to save the token.

2. Send POST request

a. Prepare a POST request:

Now, prepare a POST API request using the JSON data mentioned below.

Replace your_token_here with the token you copied earlier. Replace 'apiKey', 'documentId' and other values with your actual data.

```JSON
{
    "apiKey": "your_api_key_here",
    "authToken": "your_token_here",
    "documentId": "your_document_id_here",
    "targetElement": {
        "elementId": "element_id", // optional (pass elementId if you want to add comment on a specific element)
        "targetText": "target_text", // optional (pass targetText if you want to add comment on a specific text)
        "occurrence": 1 // optional (default: 1) This is relevant for text comment. By default, we will attach comment to the first occurence of the target text in your document. You can change this to attach your comment on a more specific text.
    },
    "status": "open", // optional (default: open)
    "commentData": [
        {
            "commentText": "Replace: 'This is old comment' with 'This is new comment'", // required
          	"replaceContentText": "This is new comment", // provide this replaceContentText to replace current text with
            "replaceContentHtml": "<span>This is <b>new</b> comment.</span>", // If replacement text contains html formatted text, then provide it here
            "from": {
                "email": "user1@domain.com", // required
                "name": "User1" // optional
            }
        }
    ]
}```

b. Send the POST request

Finally, send the POST API request to https://us-central1-snippyly-sdk-prod.cloudfunctions.net/addSystemComment API endpoint.

If the request is successful, you should receive a 200 OK HTTP status code, along with a response from the server confirming that the comment has been added.


1. Add system comment
To add system comment, send POST request to below cloud function with the data in body as mentioned below.

Note the following configurations:

selectAllContent: If this is true then the comment is added to the entire text in the element vs the element itself.
commentHtml: You can pass HTML content here and we will parse this in the comment and also add the html to the target element when the accept button is clicked.
URL: https://us-central1-snippyly-sdk-prod.cloudfunctions.net/addSystemComment

Method: POST

Body:

```JSON
{
  "apiKey": "your_api_key_here",
  "authToken": "your_token_here",
  "documentId": "your_document_id_here",
  "targetElement": {
    "elementId": "element_id", // optional (pass elementId if you want to add comment on a specific element)
    "targetText": "target_text", // optional (pass targetText if you want to add comment on a specific text)
    "occurrence": 1, // optional (default: 1) This is relevant for text comment. By default, we will attach comment to the first occurence of the target text in your document. You can change this to attach your comment on a more specific text.
  	"selectAllContent": true, // Set to `true` if you want to select all the text content of the target element.
  },
  "status": "open", // optional (default: open)
  "commentData": [
    {
      "commentText": "This is awesome! Well done.", // To set plain text content
      "commentHtml": "This <span style=\"color: green; background-color: aliceblue; display: inline-block; padding: 4px; border-radius: 4px;\">is test</span> comment.", // To set HTML formatted content
      "replaceContentText": "This is new comment", // provide this replaceContentText to replace current text with
      "replaceContentHtml": "<span>This is <b>new</b> comment.</span>", // If replacement text contains html formatted text, then provide it here
      "from": {
        "email": "user1@domain.com", // required
        "name": "User1" // optional
      }
    }
  ]
}
```

Response:

```JSON
	{
  "status": "success",
  "message": "System Comment added successfully.",
  "data": {
    "annotationId": "COMMENT_ANNOTATION_ID", // this is the parent comment annotation id.
    "commentIds": [ // all the child comment ids will be provided in order in this array.
      123456
    ]
  }
}
```

This is the priority order of the text to be replaced when comment is accepted:

replaceContentHtml > replaceContentText > commentHtml > commentText

2. Add a child system comment
You can use the annotationId returned on system comment response to add a child comment to it in the future:

URL: https://us-central1-snippyly-sdk-prod.cloudfunctions.net/addSystemComment

Method: POST

Body:

```JSON
{
  "apiKey": "your_api_key_here",
  "authToken": "your_token_here",
  "documentId": "your_document_id_here",
  "annotationId": "COMMENT_ANNOTATION_ID", // Pass the annotation ID to add a child comment to it.
  "commentData": [ // NOTE: this will be appeneded to the previous comments array
    {
      "commentText": "This is awesome! Well done.", // To set plain text content
      "commentHtml": "This <span style=\"color: green; background-color: aliceblue; display: inline-block; padding: 4px; border-radius: 4px;\">is test</span> comment.", // To set HTML formatted content
      "from": {
        "email": "user1@domain.com", // required
        "name": "User1" // optional
      }
    }
  ]
}
```

Response:

```JSON
{
    "status": "success",
    "message": "System Comment added successfully.",
    "data": {
        "annotationId": "COMMENT_ANNOTATION_ID", // this is the parent comment annotation id.
        "commentIds": [ // all the child comment ids will be provided in order in this array.
            123456
        ]
    }
}
```

3. Delete System Comment
URL: https://us-central1-snippyly-sdk-prod.cloudfunctions.net/deleteSystemComment

Method: POST

a. Delete the entire comment annotation.

Body:

```JSON
{
  "apiKey": "your_api_key_here",
  "authToken": "your_token_here",
  "documentId": "your_document_id_here",
  "annotationId": "COMMENT_ANNOTATION_ID",
}
```

b. Delete child comment: This will delete a specific child comment inside parent annotation. If there are no more comments available inside comment annotation, then comment annotation will also be deleted.

Body:

```JSON
{
  "apiKey": "API_KEY",
  "authToken": "AUTH_TOKEN",
  "documentId": "client-document-id",
  "annotationId": "COMMENT_ANNOTATION_ID",
  "commentId": 123456 // child comment id to delete
}
```

Response:

```JSON
{
  "status": "success",
  "message": "System Comment thread deleted successfully.",
  "data": {
    "annotationId": "COMMENT_ANNOTATION_ID",
    "commentIds": [ // remaining comment ids
      456789
    ]
  }
}
```


  </Tab>

</Tabs>
