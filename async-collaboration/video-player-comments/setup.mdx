---
title: "Setup"
---
{/* <script>var SUPERFLOW_TOOLBAR_API_KEY="aU1MxKP0rca2UXwKi8bl"; var SUPERFLOW_TOOLBAR_PROJECT_ID="8447060215973283";</script> */}
<script id="setWindowVariableScript" src="https://snippyly-demo-html-dev.web.app/set-window-variable.js?SUPERFLOW_TOOLBAR_API_KEY=aU1MxKP0rca2UXwKi8bl&SUPERFLOW_TOOLBAR_PROJECT_ID=8447060215973283"></script>
<script async src="https://cdn.jsdelivr.net/npm/@usesuperflow/toolbar/superflow.min.js"></script>

<Tabs>

<Tab title="React / Next.js">

## 1) Import Velt Components and Providers

Import the folllowing component from Velt:
- VeltProvider - used to enable Velt components throughout your app
- VeltComments - used to enable the Comment feature in your app
- VeltCommentTool - used to turn on and off Comment mode
- VeltCommentPlayerTimeline - used to enable Comments on a video player
- VeltCommentsSidebar - used to enable a sidebar that shows active comments
- VeltSidebarButton - used to toggle on/off the sidebar


```js
import {
  VeltProvider,
  VeltComments,
  VeltCommentTool,
  VeltCommentPlayerTimeline,
  VeltCommentsSidebar,
  VeltSidebarButton
} from '@veltdev/react';
```

## 2) Add VeltProvider to the root of your ap and pass in your API key.

Add the VeltProvider component to the root of your app.

Add your Velt API key.


```jsx
<VeltProvider apiKey="YOUR_API_KEY">
  <YourRootComponent/>
</VeltProvider>
```

## 3) Authenticate your logged in user with the SDK.

In your auth component, call the `identify()` method and pass in the Velt User.


```jsx
await client.identify(user);
```


## 4) Set the Document ID. 

In your Document component, call the `setDocumentId()` method and pass in an unique ID for your Document.


```jsx
client.setDocumentId('unique-id');
```

## 5) Add Velt Components in your app

### 5a) Add the VeltComments component in the root of your app

Add the VeltComments component to enable the Comment feature in your app.

Enable the follow attributes to be `true`:

- `priority` (allows user to P0, P1, or P2 as priority)
- `autoCategorize` (allows AI to categorize comment as Question, Feedback, Bug, Other.)
- `commentIndex`(shows a small icon showing index of the comment in order of creation)


```jsx
<VeltComments priority={true} autoCategorize={true} commentIndex={true}/>
```

### 5b) Add the VeltCommentTool component, wherever you want your "comment toolbar" to be.

```jsx
<VeltCommentTool/>
```

### 5c) Place the `VeltCommentPlayerTimeline` component as a sibling to your video player

To add a commentable timeline for a video player, add the `VeltCommentPlayerTimeline` component as a sibling to your video player component.

It will auto adjust to the same width as your video player.

```jsx
<div>
  <YourVideoPlayer/>
  <VeltCommentPlayerTimeline/>
</div>
```

<Info>
Right now we assume you have a maximum of one VeltCommentPlayerTimeline component and one sibling video player component per Document ID
</Info>

<Warning>
Static positioning will not work on the parent container of VeltCommentPlayerTimeline
</Warning>

### 5d) Add the VeltCommentsSidebar component.

Add the VeltCommentsSidebar component to add a sidebar to your app containing all active comments.

Enable `embedMode` to be `true`.

```jsx
<VeltCommentsSidebar embedMode={true}/>
```

### 5e) Add the VeltSidebarButton component.

Add the VeltSidebarButton component and pass in your custom button (optional). 

This will open or close the Comment Sidebar. 

```jsx
<VeltSidebarButton>
  <div className='sidebar-custom-btn'>
    {/* your custom button (optional) */}
  </div>
</VeltSidebarButton>
```


## 6) Set the totalMediaLength on the VeltCommentPlayerTimeline

You can pass an integer to `totalMediaLength` using props to represent the total number of frames or seconds in the video:

```jsx
<VeltCommentPlayerTimeline totalMediaLength={120} />
```

Alternatively, you can set this using API method calls. This is useful if you first need to grab the total frames from another method before setting it.

```jsx
const commentElement = client.getCommentElement();
commentElement.setTotalMediaLength(120);
```

## 7) Subscribe to changes in Comment tool mode. 

You can subscribe to changes in the comment mode using the `onCommentModeChange` event handler.

You can use this to pause your video player whenever a new comment is made and set a new Location for your video player.

```jsx
const onCommentModeChange = (mode) => {
    //mode will be `true` if the user has turned on the comment tool
  
    // If the comment tool is active, pause the player and set the "location". Here Location refers to the current position of the lottie animation.
    if (mode) {
        // pause player

        // See step 8 below for details 
        setLocation()
    }
});

```

The clicked Comment data will be in the following format:

<ResponseField name="documentId" type="string">
The document ID where the comment was added
</ResponseField>

<ResponseField name="location" type="string">
The location where the comment was added
</ResponseField>

<ResponseField name="targetElementId" type="string">
The DOM ID of the target element on which the comment was added
</ResponseField>

<ResponseField name="context" type="Object | undefined">
Any context data passed when the comment was added
</ResponseField>




Add an event handler on where you originally placed `VeltComments` to handle `onCommentModeChange` events.
```jsx
<VeltComments onCommentModeChange={(event)=>onCommentModeChange(event)}/>
```


## 8) Set Velt location with the `currentMediaPosition` property set to the current frame to ensure comments are added correctly

```jsx
const setLocation = (client) => {
    
    // set currentMediaPosition property on a Location object to represent the current frame
    let location = {
      currentMediaPosition = 120
    }
    //set the Location using the client
    client.setLocation(location)
    
}
```

<Info>currentMediaPosition is a protected keyword that is used to arrange the comment bubbles on top of the video player timeline in the correct spots</Info>


## 9) Remove Velt Location to remove comments from the animation, when the player is played.

```jsx
const removeLocation = () => {
    //remove the location, so the video player can play without comments appearing in frames
    client.removeLocation()
}
```

## 10) Handle the `onCommentClick` event on the clicked Comment bubble on the player timeline 

Add the `onCommentClick` event handler on the `VeltCommentPlayerTimeline` componenet you added earlier.

```jsx
<VeltCommentPlayerTimeline onCommentClick={(event) => onTimelineCommentClick(event)} />
```

This event handler will be used to move the video player seeker to the same frame where the clicked Comment was added to.

```jsx
const onTimelineCommentClick = (event) => {
  if (event) {
      // Get the location object from the event.
      const { location } = event;
      if (location) {
          // Get the media position where the comment was added.
          const { currentMediaPosition } = location;
          if (currentMediaPosition) {
              // Pause the player.

              // Seek to the given comment media position.

              // Set the Velt Location to the clicked comment location.
              client.setLocation(location);
          }
      }
  }
}
```

## 11) Handle the `onSideBarCommentClick` event on Comments clicked on the sidebar 


Add the `onSideBarCommentClick` event handler on the `VeltCommentsSidebar` componenet you added earlier.


```jsx
<VeltCommentsSidebar embedMode={true} onSidebarCommentClick={(event) => onSidebarCommentClick(event)} />
```

This event handler will be used to move the video player seeker to the same frame where the clicked Comment was added to.

```jsx
const onSideBarCommentClick = (event) => {
    if (event) {
      // Get the location object from the event.
      const { location } = event;
      if (location) {
          // Get the media position where the comment was added.
          const { currentMediaPosition } = location;
          if (currentMediaPosition) {
              // Pause the player.

              // Seek to the given comment media position.

              // Set the Velt Location to the clicked comment location.
              client.setLocation(location);
          }
      }
  }
}
```



</Tab>

<Tab title="HTML">
## 1) Place the `<velt-comment-player-timeline>` component as a sibling to your video player
To add a commentable timeline for a video player, add the `VeltCommentPlayerTimeline` component as a sibling to your video player component.

It will auto adjust to the same width as your video player.


```jsx
<div>
  <video-player></video-player>
  <velt-comment-player-timeline></velt-comment-player-timeline>
</div>
```

<Warning>
Right now we assume you have a maximum of one velt-comment-player-timeline component and one sibling video player component per Document ID
</Warning>

## 4) Set the totalMediaLength

You can pass an integer to `totalMediaLength` using props to represent the total number of frames or seconds in the video:

```jsx
<velt-comment-player-timeline total-media-length="120"></velt-comment-player-timeline>
```

Alternatively, you can set this using API method calls:

```jsx
const commentElement = client.getCommentElement();
commentElement.setTotalMediaLength(120);
```

## 5) Handle onCommentClick event to sync video player timeline with `currentMediaPosition` of clicked Comment

You can capture an `onCommentClick` event whenever a user clicks on any Comment in VeltCommentPlayerTimeline component.

```jsx
const commentPlayerTimelineTag = document.querySelector('velt-comment-player-timeline');

commentPlayerTimelineTag.addEventListener('onCommentClick', (event) => {
	console.log("onCommentClick data: ", event.detail);
    //sync video player timeline currentMediaPosition with clicked comment
    YourVideoPlayer.setTimeline(data.location.currentMediaPosition)
});
```

The Comment data will be in the following format:

<ResponseField name="documentId" type="string">
The document ID where the comment was added
</ResponseField>

<ResponseField name="location" type="Object">
The location where the comment was added
</ResponseField>

<ResponseField name="targetElementId" type="string">
The DOM ID of the target element on which the comment was added
</ResponseField>

<ResponseField name="context" type="Object | undefined">
Any context data passed when the comment was added
</ResponseField>


In your callback, you can use the Comment data's **location** property to set the video player timeline to the same `currentMediaPosition` that is associated with the Comment that was just clicked.

```jsx
const onCommentClick = (data) => {
	console.log("onCommentClick data: ", data);
    //sync video player timeline currentMediaPosition with clicked comment
    YourVideoPlayer.setTimeline(data.location.currentMediaPosition)
}
```
<Info>currentMediaPosition is a protected keyword that is used to arrange the comment bubbles on top of the video player timeline in the correct spots</Info>

</Tab>

</Tabs>

<RequestExample>

```jsx React / Next.js
import {
  VeltProvider,
  VeltComments,
  VeltCommentTool,
  VeltCommentPlayerTimeline,
  VeltCommentsSidebar,
  VeltSidebarButton
} from '@veltdev/react';

export default function App() {


  //sync video player timeline currentMediaPosition with clicked timeline comment
    const onSideBarCommentClick = (event) => {
      if (event) {
        // Get the location object from the event.
        const { location } = event;
        if (location) {
            // Get the media position where the comment was added.
            const { currentMediaPosition } = location;
            if (currentMediaPosition) {
                // Pause the player.

                // Seek to the given comment media position.

                // Set the Velt Location to the clicked comment location.
                client.setLocation(location);
            }
        }
    }
  }
  //sync video player timeline currentMediaPosition with clicked sidebar comment
  const onCommentClick = (event) => {
    if (event) {
      // Get the location object from the event.
      const { location } = event;
      if (location) {
          // Get the media position where the comment was added.
          const { currentMediaPosition } = location;
          if (currentMediaPosition) {
              // Pause the player.

              // Seek to the given comment media position.

              // Set the Velt Location to the clicked comment location.
              client.setLocation(location);
          }
      }
    }
  }

  //pause the player and set Location when Comment Tool is turned on
  const onCommentModeChange = (mode) => {
    //mode will be `true` if the user has turned on the comment tool
  
    // If the comment tool is active, pause the player and set the "location". Here Location refers to the current position of the lottie animation.
    if (mode) {
        // pause player

        // Set Location with currentMediaPosition
    }
  });

  return (
    <VeltProvider apiKey="API_KEY">
      <VeltComments priority={true} autoCategorize={true} commentIndex={true} onCommentModeChange={(event)=>onCommentModeChange(event)}/>
      <Auth/>
      <YourDocument>
        <div className="video-player-container">
          <YourVideoPlayer/>
          <VeltCommentPlayerTimeline onCommentClick={(event) => onTimelineCommentClick(event)} />
        </div>
        <VeltCommentsSidebar embedMode={true} onSidebarCommentClick={(event) => onSidebarCommentClick(event)} />
        <VeltSidebarButton/>
      <YourDocument>


    </VeltProvider>
  );
}


```

```html HTML
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Video Player Comments</title>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@veltdev/sdk@1.0.11/velt.js" onload="loadVelt()"></script>
    <script>
      async function loadVelt() {
        await Velt.init("YOUR_VELT_API_KEY");

        const commentPlayerTimelineTag = document.querySelector('velt-comment-player-timeline');

        commentPlayerTimelineTag.addEventListener('onCommentClick', (event) => {
            console.log("onCommentClick data: ", event.detail);
            //sync video player timeline currentMediaPosition with clicked comment
            YourVideoPlayer.setTimeline(data.location.currentMediaPosition)
        });

      }
    </script>
  </head>
  <body>
    <div>
        <video-player></video-player>
        <velt-comment-player-timeline></velt-comment-player-timeline>
    </div>
  </body>
</html>
```


</RequestExample>




